{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { refs } from \"../main\";\n  \nfunction galleryTemplate({\n  largeImageURL,\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n    return `<li class=\"gallery-item\">\n   <a class=\"gallery-link\" href=\"${largeImageURL}\">\n   <img class=\"gallery-image\"\n   src=\"${webformatURL}\" \n   alt=\"${tags}\" />\n  </a> <div class=\"info-box\">\n  <p>Likes:<span> ${likes}</span></p>\n        <p>Views:<span> ${views}</span></p>\n        <p>Comments:<span> ${comments}</span></p>\n        <p>Downloads:<span> ${downloads}</span> </p>    \n    </div>\n  </li>`;\n}\n\nlet galleryA = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n\nexport function renderGalleryItem(images) {\n    const markup = images.map(galleryTemplate).join('');\n    refs.gallery.insertAdjacentHTML(\"beforeend\", markup);   \n   galleryA.refresh();\n}","import axios from 'axios';\n\nimport { searchQuery } from '../main';\nimport { pageOf } from '../main';\n\nexport const Per_Page = 15;\nexport async function getImages() {\n    \n    axios.defaults.baseURL = 'https://pixabay.com/api/';\n    const response = await axios.get('', {\n    params: {\n    key: '24543353-3824dfbf23e7b5ead533e5f72',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    q: searchQuery,\n    page: pageOf,\n    per_page: Per_Page,\n    }\n    });\n    return response.data;\n}\n\n\n\n    \n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { renderGalleryItem } from \"./js/render-functions\";\nimport { getImages } from \"./js/pixabay-api\";\nimport { Per_Page } from \"./js/pixabay-api\";\n\nexport let searchQuery = '';\nexport let pageOf = 1;\n\nexport const refs = {\n    formEl: document.querySelector('.form'),\n    inputEl: document.querySelector('.query'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    btnLoad: document.querySelector('.load-more'),\n \n}\n\n const galleryItem = refs.gallery.querySelector('.gallery-item');\n\nrefs.formEl.addEventListener(\"submit\", onFormSubmit);\nrefs.btnLoad.addEventListener(\"click\", onLoadMoreClick);\n\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    createLoader();\n    let query = e.target.elements.query.value;\n    searchQuery = query;\n    if (query.trim() === \"\") {\n      \n      iziToast.show({\n        message: 'Please full the input field',\n        messageColor: '#FFFFFF',\n        backgroundColor: '#B51B1B',\n        position: 'topRight',\n        });\n    }\n    else {\n        try {\n            refs.gallery.innerHTML = '';\n            refs.btnLoad.style.display = \"none\";\n            pageOf = 1;\n            const data = await getImages(pageOf,  searchQuery);\n            \n            if (data.hits.length > 0) {\n                renderGalleryItem(data.hits);\n                refs.btnLoad.style.display = \"block\";\n\n            if (galleryItem) {\n                const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n\n                window.scrollBy({\n                top: galleryItemHeight * 2, \n                behavior: 'smooth',\n                });\n            }\n            } else {\n                refs.gallery.innerHTML = '';\n                refs.btnLoad.style.display = \"none\";\n            iziToast.show({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            messageColor: '#FFFFFF',\n            backgroundColor: '#B51B1B',\n            position: 'topRight',\n            });\n            }\n            checkEndOfSearchResults(data.totalHits, pageOf);\n        } catch (error) {\n            console.error('Error data:', error);\n        } \n    }    \n  createLoader();\n    e.target.reset();\n}\n\nasync function onLoadMoreClick() {\n    createLoader();\n    pageOf += 1;\n    const data = await getImages();\n    renderGalleryItem(data.hits);\n   \n    checkEndOfSearchResults(data.totalHits, pageOf);\n    createLoader();\n            \n}\n\nfunction createLoader() {\n    refs.loader.classList.toggle('hidden');\n}\n\n\nfunction checkEndOfSearchResults(totalHits, pageOf) {\n    const maxPage = Math.ceil(totalHits / Per_Page);\n    if (maxPage === pageOf) {\n        refs.btnLoad.style.display = 'none';\n        iziToast.show({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            messageColor: '#FFFFFF',\n            backgroundColor: '#B51B1B',\n            position: 'topRight',\n        });\n    }\n}"],"names":["galleryTemplate","largeImageURL","webformatURL","tags","likes","views","comments","downloads","galleryA","SimpleLightbox","renderGalleryItem","images","markup","refs","Per_Page","getImages","axios","searchQuery","pageOf","galleryItem","onFormSubmit","onLoadMoreClick","e","createLoader","query","iziToast","data","galleryItemHeight","checkEndOfSearchResults","error","totalHits"],"mappings":"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"}